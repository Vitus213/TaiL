# æŸ±å½¢è§†å›¾å±‚çº§å¯¼èˆªé‡æ„æ–¹æ¡ˆ

## æ¦‚è¿°

é‡æ„ç»Ÿè®¡è§†å›¾ä¸­çš„æŸ±å½¢å›¾ï¼Œå®ç°å¯ä¸‹é’»çš„å±‚çº§æ—¶é—´å¯¼èˆªç³»ç»Ÿï¼Œæ”¯æŒä»å¹´è§†å›¾é€çº§æ·±å…¥åˆ°å°æ—¶è§†å›¾ï¼Œå¹¶æä¾›"ä»Šå¤©"å’Œ"æ˜¨å¤©"å¿«æ·è·³è½¬åŠŸèƒ½ã€‚

## éœ€æ±‚åˆ†æ

æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œéœ€è¦å®ç°ä»¥ä¸‹å±‚çº§å¯¼èˆªç»“æ„ï¼š

1. **å¹´è§†å›¾**ï¼šæ˜¾ç¤º12ä¸ªæœˆçš„æŸ±å½¢å›¾
2. **æœˆè§†å›¾**ï¼šæ˜¾ç¤ºå½“æœˆæ¯ä¸€å‘¨ï¼ˆ4-5å‘¨ï¼‰çš„æŸ±å½¢å›¾
3. **å‘¨è§†å›¾**ï¼šæ˜¾ç¤ºå½“å‘¨æ¯ä¸€å¤©ï¼ˆ7å¤©ï¼‰çš„æŸ±å½¢å›¾
4. **å¤©è§†å›¾ï¼ˆå°æ—¶è§†å›¾ï¼‰**ï¼šæ˜¾ç¤ºå½“å¤©24å°æ—¶çš„æŸ±å½¢å›¾
5. **å¿«æ·åŠŸèƒ½**ï¼šå¯ä»¥å¿«é€Ÿè·³è½¬åˆ°"ä»Šå¤©"å’Œ"æ˜¨å¤©"

## ç°æœ‰ä»£ç åˆ†æ

### å½“å‰å®ç°

ä» [`tail-gui/src/views/statistics.rs`](tail-gui/src/views/statistics.rs:1) åˆ†æï¼š

- å½“å‰ä½¿ç”¨ [`TimeRange`](tail-core/src/models.rs:45) æšä¸¾æ¥è¡¨ç¤ºæ—¶é—´èŒƒå›´ï¼ˆToday, Yesterday, Last7Days, Last30Days, Customï¼‰
- å·²æœ‰ [`draw_hourly_chart()`](tail-gui/src/views/statistics.rs:109) æ–¹æ³•ç»˜åˆ¶24å°æ—¶åˆ†å¸ƒå›¾
- å·²æœ‰ [`draw_daily_chart_interactive()`](tail-gui/src/views/statistics.rs:317) æ–¹æ³•ç»˜åˆ¶å¯äº¤äº’çš„æŒ‰å¤©åˆ†å¸ƒå›¾
- ç‚¹å‡»æŸ±å­å¯ä»¥åˆ‡æ¢åˆ° [`TimeRange::Custom`](tail-core/src/models.rs:51) è‡ªå®šä¹‰èŒƒå›´

### å·²æœ‰çš„å¯¼èˆªæ¨¡å‹

ä» [`tail-core/src/models.rs`](tail-core/src/models.rs:54) å‘ç°å·²ç»å®šä¹‰äº†ï¼š

- [`TimeNavigationLevel`](tail-core/src/models.rs:56) æšä¸¾ï¼šYear, Month, Week, Day, Hour
- [`TimeNavigationState`](tail-core/src/models.rs:76) ç»“æ„ä½“ï¼šç®¡ç†å¯¼èˆªçŠ¶æ€
- å·²å®ç°çš„æ–¹æ³•ï¼š
  - [`go_back()`](tail-core/src/models.rs:103)ï¼šè¿”å›ä¸Šä¸€çº§
  - [`drill_into_year()`](tail-core/src/models.rs:125)ï¼šè¿›å…¥å¹´ä»½çš„æœˆä»½è§†å›¾
  - [`drill_into_month()`](tail-core/src/models.rs:131)ï¼šè¿›å…¥æœˆä»½çš„å‘¨è§†å›¾
  - [`drill_into_week()`](tail-core/src/models.rs:137)ï¼šè¿›å…¥å‘¨çš„å¤©è§†å›¾
  - [`drill_into_day()`](tail-core/src/models.rs:143)ï¼šè¿›å…¥å¤©çš„å°æ—¶è§†å›¾
  - [`go_to_today()`](tail-core/src/models.rs:149)ï¼šè·³è½¬åˆ°ä»Šå¤©
  - [`get_breadcrumb()`](tail-core/src/models.rs:158)ï¼šè·å–é¢åŒ…å±‘å¯¼èˆªæ–‡æœ¬

## æ¶æ„è®¾è®¡

### 1. æ•°æ®æ¨¡å‹æ‰©å±•

åˆ©ç”¨ç°æœ‰çš„ [`TimeNavigationState`](tail-core/src/models.rs:76)ï¼Œéœ€è¦æ·»åŠ ï¼š

```rust
// åœ¨ tail-core/src/models.rs ä¸­æ·»åŠ 
impl TimeNavigationState {
    /// è·³è½¬åˆ°æ˜¨å¤©
    pub fn go_to_yesterday(&mut self, year: i32, month: u32, day: u32) {
        self.selected_year = year;
        self.selected_month = Some(month);
        self.selected_day = Some(day);
        self.selected_week = None;
        self.level = TimeNavigationLevel::Hour;
    }
    
    /// è·å–å½“å‰å¯¼èˆªçŠ¶æ€å¯¹åº”çš„æ—¶é—´èŒƒå›´
    pub fn to_time_range(&self) -> TimeRange {
        // æ ¹æ® level å’Œé€‰ä¸­çš„å¹´æœˆæ—¥å‘¨è®¡ç®— TimeRange::Custom
    }
}
```

### 2. æ•°æ®èšåˆé€»è¾‘

éœ€è¦å®ç°ä¸åŒå±‚çº§çš„æ•°æ®èšåˆå‡½æ•°ï¼š

```rust
// åœ¨ StatisticsView ä¸­æ·»åŠ 
impl<'a> StatisticsView<'a> {
    /// æŒ‰å¹´èšåˆï¼šè¿”å›12ä¸ªæœˆçš„ä½¿ç”¨æ•°æ®
    fn aggregate_by_year(&self, year: i32) -> Vec<PeriodUsage> {
        // éå† app_usageï¼ŒæŒ‰æœˆä»½èšåˆ
        // è¿”å› 1-12 æœˆçš„æ•°æ®
    }
    
    /// æŒ‰æœˆèšåˆï¼šè¿”å›å½“æœˆå„å‘¨çš„ä½¿ç”¨æ•°æ®
    fn aggregate_by_month(&self, year: i32, month: u32) -> Vec<PeriodUsage> {
        // è®¡ç®—è¯¥æœˆæœ‰å‡ å‘¨ï¼ˆ4-5å‘¨ï¼‰
        // æŒ‰å‘¨èšåˆæ•°æ®
    }
    
    /// æŒ‰å‘¨èšåˆï¼šè¿”å›å½“å‘¨7å¤©çš„ä½¿ç”¨æ•°æ®
    fn aggregate_by_week(&self, year: i32, month: u32, week: u32) -> Vec<PeriodUsage> {
        // è®¡ç®—è¯¥å‘¨çš„èµ·æ­¢æ—¥æœŸ
        // æŒ‰å¤©èšåˆæ•°æ®ï¼ˆå‘¨ä¸€åˆ°å‘¨æ—¥ï¼‰
    }
    
    /// æŒ‰å¤©èšåˆï¼šè¿”å›å½“å¤©24å°æ—¶çš„ä½¿ç”¨æ•°æ®
    fn aggregate_by_day(&self, year: i32, month: u32, day: u32) -> Vec<PeriodUsage> {
        // æŒ‰å°æ—¶èšåˆæ•°æ®ï¼ˆ0-23æ—¶ï¼‰
    }
}
```

### 3. äº¤äº’å¼æŸ±å½¢å›¾ç»„ä»¶

åˆ›å»ºç»Ÿä¸€çš„å¯ä¸‹é’»æŸ±å½¢å›¾ç»„ä»¶ï¼š

```rust
/// å±‚çº§æŸ±å½¢å›¾ç»„ä»¶
struct HierarchicalBarChart<'a> {
    /// æ—¶é—´æ®µæ•°æ®
    periods: &'a [PeriodUsage],
    /// å½“å‰å¯¼èˆªå±‚çº§
    level: TimeNavigationLevel,
    /// å›¾è¡¨æ ‡é¢˜
    title: &'a str,
    /// ä¸»é¢˜
    theme: &'a TaiLTheme,
}

impl<'a> HierarchicalBarChart<'a> {
    /// æ˜¾ç¤ºå›¾è¡¨ï¼Œè¿”å›è¢«ç‚¹å‡»çš„æ—¶é—´æ®µç´¢å¼•
    fn show(&self, ui: &mut Ui) -> Option<i32> {
        // ç»˜åˆ¶æŸ±å½¢å›¾
        // å¤„ç†é¼ æ ‡æ‚¬åœå’Œç‚¹å‡»
        // æ˜¾ç¤ºå·¥å…·æç¤º
    }
}
```

### 4. å¯¼èˆªæ§åˆ¶ç»„ä»¶

åˆ›å»ºé¢åŒ…å±‘å¯¼èˆªå’Œå¿«æ·æŒ‰é’®ï¼š

```rust
/// æ—¶é—´å¯¼èˆªæ§åˆ¶å™¨
struct TimeNavigationController<'a> {
    /// å½“å‰å¯¼èˆªçŠ¶æ€
    state: &'a TimeNavigationState,
    /// ä¸»é¢˜
    theme: &'a TaiLTheme,
}

impl<'a> TimeNavigationController<'a> {
    /// æ˜¾ç¤ºå¯¼èˆªæ§åˆ¶å™¨
    /// è¿”å›ï¼š(æ˜¯å¦è¿”å›ä¸Šä¸€çº§, æ˜¯å¦è·³è½¬ä»Šå¤©, æ˜¯å¦è·³è½¬æ˜¨å¤©)
    fn show(&self, ui: &mut Ui) -> (bool, bool, bool) {
        // æ˜¾ç¤ºé¢åŒ…å±‘å¯¼èˆª
        // æ˜¾ç¤ºè¿”å›æŒ‰é’®
        // æ˜¾ç¤º"ä»Šå¤©"å’Œ"æ˜¨å¤©"å¿«æ·æŒ‰é’®
    }
}
```

## UI å¸ƒå±€è®¾è®¡

### æ•´ä½“å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ˆ è¯¦ç»†ç»Ÿè®¡                                              â”‚
â”‚ æŸ¥çœ‹åº”ç”¨ä½¿ç”¨è¯¦æƒ…                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¯¼èˆªï¼š2026å¹´ > 1æœˆ > ç¬¬2å‘¨    [â¬… è¿”å›] [ä»Šå¤©] [æ˜¨å¤©]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  æ—¶é—´åˆ†å¸ƒ (ç‚¹å‡»æŸ±å­æŸ¥çœ‹è¯¦æƒ…)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â–ˆ                                              â”‚    â”‚
â”‚  â”‚  â–ˆ     â–ˆ                                        â”‚    â”‚
â”‚  â”‚  â–ˆ  â–ˆ  â–ˆ  â–ˆ                                     â”‚    â”‚
â”‚  â”‚  â–ˆ  â–ˆ  â–ˆ  â–ˆ  â–ˆ  â–ˆ  â–ˆ                           â”‚    â”‚
â”‚  â”‚ å‘¨ä¸€ å‘¨äºŒ å‘¨ä¸‰ å‘¨å›› å‘¨äº” å‘¨å…­ å‘¨æ—¥                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åº”ç”¨è¯¦æƒ…                                                â”‚
â”‚  [åº”ç”¨åˆ—è¡¨è¡¨æ ¼]                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„å±‚çº§æ˜¾ç¤ºå†…å®¹

1. **å¹´è§†å›¾ï¼ˆMonth Levelï¼‰**
   - æ ‡é¢˜ï¼š`2026å¹´`
   - æŸ±å½¢å›¾ï¼š12ä¸ªæŸ±å­ï¼ˆ1æœˆ-12æœˆï¼‰
   - Xè½´æ ‡ç­¾ï¼š`1æœˆ`, `2æœˆ`, ..., `12æœˆ`
   - ç‚¹å‡»ï¼šè¿›å…¥è¯¥æœˆçš„å‘¨è§†å›¾

2. **æœˆè§†å›¾ï¼ˆWeek Levelï¼‰**
   - é¢åŒ…å±‘ï¼š`2026å¹´ > 1æœˆ`
   - æŸ±å½¢å›¾ï¼š4-5ä¸ªæŸ±å­ï¼ˆç¬¬1å‘¨-ç¬¬5å‘¨ï¼‰
   - Xè½´æ ‡ç­¾ï¼š`ç¬¬1å‘¨`, `ç¬¬2å‘¨`, ..., `ç¬¬5å‘¨`
   - ç‚¹å‡»ï¼šè¿›å…¥è¯¥å‘¨çš„å¤©è§†å›¾

3. **å‘¨è§†å›¾ï¼ˆDay Levelï¼‰**
   - é¢åŒ…å±‘ï¼š`2026å¹´ > 1æœˆ > ç¬¬2å‘¨`
   - æŸ±å½¢å›¾ï¼š7ä¸ªæŸ±å­ï¼ˆå‘¨ä¸€-å‘¨æ—¥ï¼‰
   - Xè½´æ ‡ç­¾ï¼š`å‘¨ä¸€`, `å‘¨äºŒ`, ..., `å‘¨æ—¥`
   - ç‚¹å‡»ï¼šè¿›å…¥è¯¥å¤©çš„å°æ—¶è§†å›¾

4. **å¤©è§†å›¾ï¼ˆHour Levelï¼‰**
   - é¢åŒ…å±‘ï¼š`2026å¹´ > 1æœˆ > ç¬¬2å‘¨ > 15æ—¥`
   - æŸ±å½¢å›¾ï¼š24ä¸ªæŸ±å­ï¼ˆ0æ—¶-23æ—¶ï¼‰
   - Xè½´æ ‡ç­¾ï¼š`0æ—¶`, `3æ—¶`, `6æ—¶`, ..., `21æ—¶`ï¼ˆæ¯3å°æ—¶æ˜¾ç¤ºï¼‰
   - ç‚¹å‡»ï¼šæ— æ“ä½œï¼ˆæœ€åº•å±‚ï¼‰

## äº¤äº’æµç¨‹

### ä¸‹é’»æµç¨‹

```mermaid
graph TD
    A[å¹´è§†å›¾: 12ä¸ªæœˆ] -->|ç‚¹å‡»æŸæœˆ| B[æœˆè§†å›¾: 4-5å‘¨]
    B -->|ç‚¹å‡»æŸå‘¨| C[å‘¨è§†å›¾: 7å¤©]
    C -->|ç‚¹å‡»æŸå¤©| D[å¤©è§†å›¾: 24å°æ—¶]
    
    D -->|è¿”å›æŒ‰é’®| C
    C -->|è¿”å›æŒ‰é’®| B
    B -->|è¿”å›æŒ‰é’®| A
    
    A -->|ä»Šå¤©æŒ‰é’®| D1[ä»Šå¤©çš„å°æ—¶è§†å›¾]
    B -->|ä»Šå¤©æŒ‰é’®| D1
    C -->|ä»Šå¤©æŒ‰é’®| D1
    D -->|ä»Šå¤©æŒ‰é’®| D1
    
    A -->|æ˜¨å¤©æŒ‰é’®| D2[æ˜¨å¤©çš„å°æ—¶è§†å›¾]
    B -->|æ˜¨å¤©æŒ‰é’®| D2
    C -->|æ˜¨å¤©æŒ‰é’®| D2
    D -->|æ˜¨å¤©æŒ‰é’®| D2
```

### çŠ¶æ€ç®¡ç†

åœ¨ [`StatisticsView`](tail-gui/src/views/statistics.rs:14) ä¸­æ·»åŠ å¯¼èˆªçŠ¶æ€ï¼š

```rust
pub struct StatisticsView<'a> {
    app_usage: &'a [AppUsage],
    time_range: TimeRange,  // ä¿ç•™ç”¨äºæ•°æ®æŸ¥è¯¢
    navigation_state: TimeNavigationState,  // æ–°å¢ï¼šå¯¼èˆªçŠ¶æ€
    theme: &'a TaiLTheme,
    icon_cache: &'a mut IconCache,
}
```

## å®ç°æ­¥éª¤

### é˜¶æ®µ1ï¼šæ•°æ®å±‚æ‰©å±•

1. âœ… å·²æœ‰ [`TimeNavigationState`](tail-core/src/models.rs:76) å’Œ [`TimeNavigationLevel`](tail-core/src/models.rs:56)
2. æ·»åŠ  `go_to_yesterday()` æ–¹æ³•
3. æ·»åŠ  `to_time_range()` æ–¹æ³•ç”¨äºæ•°æ®æŸ¥è¯¢
4. åˆ©ç”¨ç°æœ‰çš„ [`PeriodUsage`](tail-core/src/models.rs:187) ç»“æ„ä½“

### é˜¶æ®µ2ï¼šæ•°æ®èšåˆå®ç°

1. å®ç° `aggregate_by_year()` - æŒ‰æœˆèšåˆ
2. å®ç° `aggregate_by_month()` - æŒ‰å‘¨èšåˆ
3. å®ç° `aggregate_by_week()` - æŒ‰å¤©èšåˆ
4. å®ç° `aggregate_by_day()` - æŒ‰å°æ—¶èšåˆï¼ˆå¤ç”¨ç°æœ‰é€»è¾‘ï¼‰

### é˜¶æ®µ3ï¼šUIç»„ä»¶å¼€å‘

1. åˆ›å»º `HierarchicalBarChart` ç»„ä»¶
   - ç»Ÿä¸€çš„æŸ±å½¢å›¾ç»˜åˆ¶é€»è¾‘
   - æ”¯æŒä¸åŒå±‚çº§çš„æ ‡ç­¾æ ¼å¼
   - äº¤äº’å¼ç‚¹å‡»å’Œæ‚¬åœ
   
2. åˆ›å»º `TimeNavigationController` ç»„ä»¶
   - é¢åŒ…å±‘å¯¼èˆªæ˜¾ç¤º
   - è¿”å›æŒ‰é’®
   - "ä»Šå¤©"å’Œ"æ˜¨å¤©"å¿«æ·æŒ‰é’®

### é˜¶æ®µ4ï¼šé›†æˆåˆ°ç»Ÿè®¡è§†å›¾

1. ä¿®æ”¹ [`StatisticsView`](tail-gui/src/views/statistics.rs:14) æ·»åŠ  `navigation_state` å­—æ®µ
2. é‡æ„ [`show()`](tail-gui/src/views/statistics.rs:41) æ–¹æ³•ï¼š
   - æ˜¾ç¤ºå¯¼èˆªæ§åˆ¶å™¨
   - æ ¹æ®å½“å‰å±‚çº§æ˜¾ç¤ºå¯¹åº”çš„æŸ±å½¢å›¾
   - å¤„ç†å¯¼èˆªäº‹ä»¶ï¼ˆç‚¹å‡»æŸ±å­ã€è¿”å›ã€å¿«æ·è·³è½¬ï¼‰
3. ä¿ç•™ç°æœ‰çš„åº”ç”¨è¯¦æƒ…è¡¨æ ¼

### é˜¶æ®µ5ï¼šæµ‹è¯•å’Œä¼˜åŒ–

1. æµ‹è¯•å„å±‚çº§ä¹‹é—´çš„å¯¼èˆª
2. æµ‹è¯•å¿«æ·è·³è½¬åŠŸèƒ½
3. ä¼˜åŒ–æ€§èƒ½ï¼ˆæ•°æ®èšåˆç¼“å­˜ï¼‰
4. ä¼˜åŒ–UIç»†èŠ‚ï¼ˆåŠ¨ç”»ã€é¢œè‰²ã€é—´è·ï¼‰

## æŠ€æœ¯ç»†èŠ‚

### å‘¨çš„è®¡ç®—

ä½¿ç”¨ `chrono` åº“è®¡ç®—å‘¨ï¼š

```rust
use chrono::{Datelike, NaiveDate};

fn get_week_of_month(date: NaiveDate) -> u32 {
    let first_day = NaiveDate::from_ymd_opt(date.year(), date.month(), 1).unwrap();
    let first_weekday = first_day.weekday().num_days_from_monday();
    let day_of_month = date.day();
    
    ((day_of_month + first_weekday - 1) / 7) + 1
}
```

### æ•°æ®æŸ¥è¯¢ä¼˜åŒ–

æ ¹æ®å¯¼èˆªçŠ¶æ€è®¡ç®—ç²¾ç¡®çš„æ—¶é—´èŒƒå›´ï¼Œé¿å…æŸ¥è¯¢ä¸å¿…è¦çš„æ•°æ®ï¼š

```rust
impl TimeNavigationState {
    pub fn to_time_range(&self) -> TimeRange {
        use chrono::{NaiveDate, TimeZone, Utc};
        
        match self.level {
            TimeNavigationLevel::Year => {
                // æ•´å¹´ï¼š1æœˆ1æ—¥ 00:00 - 12æœˆ31æ—¥ 23:59
                let start = Utc.ymd(self.selected_year, 1, 1).and_hms(0, 0, 0);
                let end = Utc.ymd(self.selected_year, 12, 31).and_hms(23, 59, 59);
                TimeRange::Custom(start, end)
            }
            TimeNavigationLevel::Month => {
                // æ•´æœˆ
                let month = self.selected_month.unwrap();
                // ... è®¡ç®—æœˆçš„èµ·æ­¢æ—¶é—´
            }
            // ... å…¶ä»–å±‚çº§
        }
    }
}
```

### é¢œè‰²æ–¹æ¡ˆ

æ ¹æ®ä½¿ç”¨é‡ä½¿ç”¨æ¸å˜è‰²ï¼š

- é«˜ä½¿ç”¨é‡ï¼ˆ>75%ï¼‰ï¼š`theme.primary_color`
- ä¸­ä½¿ç”¨é‡ï¼ˆ50-75%ï¼‰ï¼š`theme.primary_color.linear_multiply(0.7)`
- ä½ä½¿ç”¨é‡ï¼ˆ>0%ï¼‰ï¼š`theme.primary_color.linear_multiply(0.4)`
- æ— ä½¿ç”¨ï¼š`theme.divider_color`
- æ‚¬åœé«˜äº®ï¼š`theme.accent_color`

## å…¼å®¹æ€§è€ƒè™‘

### ä¿ç•™ç°æœ‰åŠŸèƒ½

1. ä¿ç•™ [`TimeRangeSelector`](tail-gui/src/components/time_selector.rs:9)ï¼ˆä»Šå¤©/æ˜¨å¤©/7å¤©/30å¤©ï¼‰ä½œä¸ºå¿«æ·é€‰é¡¹
2. æ–°çš„å±‚çº§å¯¼èˆªä½œä¸ºä¸»è¦äº¤äº’æ–¹å¼
3. ä¸¤ç§æ–¹å¼å¯ä»¥å…±å­˜ï¼š
   - ç‚¹å‡»å¿«æ·é€‰é¡¹ï¼šè‡ªåŠ¨è®¾ç½®å¯¼èˆªçŠ¶æ€åˆ°å¯¹åº”å±‚çº§
   - ä½¿ç”¨å±‚çº§å¯¼èˆªï¼šæ›´ç²¾ç»†çš„æ—¶é—´æ§åˆ¶

### æ•°æ®å…¼å®¹

- ç»§ç»­ä½¿ç”¨ [`TimeRange`](tail-core/src/models.rs:45) è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢
- [`TimeNavigationState`](tail-core/src/models.rs:76) ä»…ç”¨äºUIå¯¼èˆª
- é€šè¿‡ `to_time_range()` æ–¹æ³•æ¡¥æ¥ä¸¤è€…

## ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### è§†è§‰åé¦ˆ

1. æ‚¬åœæ—¶æŸ±å­é«˜äº®æ˜¾ç¤º
2. æ˜¾ç¤ºå·¥å…·æç¤ºï¼ˆæ—¥æœŸ + ä½¿ç”¨æ—¶é•¿ï¼‰
3. ç‚¹å‡»æ—¶æœ‰è§†è§‰åé¦ˆ
4. é¢åŒ…å±‘å¯¼èˆªæ¸…æ™°æ˜¾ç¤ºå½“å‰ä½ç½®

### æ€§èƒ½ä¼˜åŒ–

1. æ•°æ®èšåˆç»“æœç¼“å­˜
2. åªåœ¨å¯¼èˆªçŠ¶æ€å˜åŒ–æ—¶é‡æ–°èšåˆ
3. ä½¿ç”¨å¢é‡æ›´æ–°è€Œéå…¨é‡é‡ç»˜

### å¯è®¿é—®æ€§

1. é”®ç›˜å¯¼èˆªæ”¯æŒï¼ˆæ–¹å‘é”®åˆ‡æ¢æŸ±å­ï¼ŒEnterä¸‹é’»ï¼ŒEscè¿”å›ï¼‰
2. æ¸…æ™°çš„è§†è§‰å±‚æ¬¡
3. è¶³å¤Ÿçš„å¯¹æ¯”åº¦

## æ€»ç»“

æœ¬æ–¹æ¡ˆå……åˆ†åˆ©ç”¨äº†ç°æœ‰çš„ [`TimeNavigationState`](tail-core/src/models.rs:76) å’Œ [`TimeNavigationLevel`](tail-core/src/models.rs:56) æ¨¡å‹ï¼Œåªéœ€è¦ï¼š

1. æ‰©å±•å°‘é‡æ–¹æ³•ï¼ˆ`go_to_yesterday()`, `to_time_range()`ï¼‰
2. å®ç°æ•°æ®èšåˆé€»è¾‘
3. åˆ›å»ºå¯å¤ç”¨çš„UIç»„ä»¶
4. é›†æˆåˆ°ç°æœ‰çš„ç»Ÿè®¡è§†å›¾

è¿™æ ·å¯ä»¥åœ¨ä¿æŒä»£ç æ•´æ´çš„åŒæ—¶ï¼Œæä¾›å¼ºå¤§çš„æ—¶é—´å¯¼èˆªåŠŸèƒ½ã€‚
